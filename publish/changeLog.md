
### 不兼容性变更说明

- 数据迁移，升级此版本时，会使用旧版本的我的列表、下载设置、快捷键设置、自定义源等数据会自动迁移到新的数据格式版本，旧的数据仍然会保留，但下载列表的数据不做迁移
- 备份文件，v2.0.0及以后版本导出的列表、配置不支持导入v2.0.0之前版本，但v2.0.0之前版本导出的列表、配置支持导入v2.0.0以及以后版本
- 同步功能，由于v2.0.0支持本地歌曲，所以未兼容现有移动端版本的同步，需要以后更新移动端

### 新增

- 新增自定义主题功能
- 新增歌单搜索功能
- 新增将本地歌曲添加到我的列表的支持，此功能可以在列表的右击菜单中使用（本地歌曲的歌词优先尝试读取相同路径下的同名歌词文件，若文件不存在则尝试读取歌曲文件内的歌词，若还是找不到歌词则尝试利用换源功能获取在线歌词，歌曲封面则是尝试读取歌曲文件内的封面，若不存在则利用换源功能获取在线封面）
- 启动软件时自动回到上次的界面，例如上次退出软件时在我的列表，下次启动软件时会自动进入我的列表
- 新增启动软件时自动播放音乐设置，默认关闭，可去设置-播放设置开启
- 新增“蛋雅深藍”皮肤
- 新增歌词时是否歌词翻译、罗马音设置，默认关闭，可以去设置-下载设置开启（#344）
- 新增界面字体大小设置
- 桌面歌词新增竖排歌词显示功能（#971）
- 桌面歌词新增歌词对齐方式、是否不允许歌词换行、歌词颜色设置
- 桌面歌词新增歌曲频谱显示（得益于主窗口与桌面歌词进程通信的改进，可以将此功能以CPU使用率“相对较低”的方式带到桌面歌词中）
- 添加kg源罗马音歌词的支持

### 优化（界面/交互/功能）

- 调整软件界面及配色，使其更加清爽
- 处于单曲循环、顺序播放、禁用切歌模式时，手动切歌将会按列表循环模式的逻辑处理切歌（#864）
- 歌单右键菜单的“重复歌曲”扫描功能现在会将歌曲名字内的括号内容移除再对比，这可以有效找出歌曲的变体，例如：`突然的自我`、`突然的自我(Live)`、`突然的自我（女生版）`、`突然的自我(DJ版)`等都会被找出来（#987）
- 播放栏的心形按钮点击时，将会收藏/取消收藏当前播放的歌曲，右击将打开歌曲添加弹窗（原来的行为），然后可以将此歌曲添加到其他列表
- 允许更小的桌面歌词窗口高度，可以取消“不允许拖动到主屏幕之外”设置后，再启用“不允许歌词换行”、“置顶歌词”与“自动刷新置顶”设置，把它拖动到任务栏上，当做任务栏歌词使用

### 优化（程序）

- 优化程序启动性能，优化与程序交互的流畅度
- 重构整个程序，重新梳理了程序逻辑，使其更容易扩展及维护，将大部分代码从JavaScript迁移到TypeScript
- 重写配置管理、列表管理功能，列表、歌词数据从json文件迁移到sqlite3存储，这应该能解决因为意外的字符编码导致的数据文件损坏问题

### 变更

- 列表右侧的操作按钮栏默认不再显示，歌曲的操作可以使用右键菜单代替，若想恢复它们的显示，可以去设置-列表设置-启用操作按钮栏开启
- 窗口大小设置时不再自动调整字体大小，想要调整字体大小可以使用新增的字体大小设置调整
- v2.0.0及以后版本导出的列表、配置不支持导入v2.0.0之前版本，但v2.0.0之前版本导出的列表、配置支持导入v2.0.0以及以后版本

### 修复

- 修复Linux、macOS下若程序路径存在百分号时会导致软件无法启动的问题（#963）
- 支持单行多时间标签歌词解析，修复某些歌词会出现时间标签的问题

### 移除

- 移除“信口雌黄”皮肤（由于该皮肤的配色有点刺眼），若你正在使用该皮肤，可以使用自定义主题功能恢复它
- 移除Linux deb x86包构建，Electron/Chromium已不再支持 32-bit Linux（electron/electron#34787）
- 移除桌面歌词主题设置，改用桌面歌词字体颜色设置功能代替

### 其他

- 更新Electron到v19.1.3
